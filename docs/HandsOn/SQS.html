
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2. SQSのチュートリアル実装(CLI編) &#8212; my_sphinx  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="6. MSKのチュートリアル実装(CLI編)" href="MSK.html" />
    <link rel="prev" title="1. CodePipelineを利用してCFNのCICD環境を作成する" href="cloudformaiton_CICD.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="MSK.html" title="6. MSKのチュートリアル実装(CLI編)"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="cloudformaiton_CICD.html" title="1. CodePipelineを利用してCFNのCICD環境を作成する"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">my_sphinx  ドキュメント</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>SQSのチュートリアル実装(CLI編)</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="sqs-cli">
<h1><span class="section-number">2. </span>SQSのチュートリアル実装(CLI編)<a class="headerlink" href="#sqs-cli" title="この見出しへのパーマリンク">¶</a></h1>
<p>以下の内容に関して理解するためにチュートリアルを行う</p>
<ul class="simple">
<li><p>キューの作り方</p></li>
<li><p>DLTの設定方法</p></li>
<li><p>メッセージの送受信方法</p></li>
</ul>
<p>参考にしたサイト</p>
<ul class="simple">
<li><p><a class="reference external" href="https://weblabo.oscasierra.net/aws-sqs-tutorial/">CLIで作成・送受信</a></p></li>
</ul>
<section id="id1">
<h2><span class="section-number">2.1. </span>キューの作り方<a class="headerlink" href="#id1" title="この見出しへのパーマリンク">¶</a></h2>
<p>SQSのキューの作成方法について整理する</p>
<section id="cli">
<h3><span class="section-number">2.1.1. </span>CLIで作成する場合<a class="headerlink" href="#cli" title="この見出しへのパーマリンク">¶</a></h3>
<p>まずは、キューが存在するかの確認。以下コマンドで、現在のキューを確認できる。何もない場合は返値なし</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs list-queues
</pre></div>
</div>
<p>キューの作成はcreate-queueコマンド（以下は標準キューを作成する場合）</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs create-queue --queue-name [YOUR_QUEUE_NAME]
{
    &quot;QueueUrl&quot;: &quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot;
}
</pre></div>
</div>
<p>FIFOキューを作成する場合は、キュー名の最後に<code class="docutils literal notranslate"><span class="pre">.fifo</span></code>を追加して、FifoQueue=Trueのオプションを追加する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs create-queue --queue-name [YOUR_QUEUE_NAME].fifo --attributes FifoQueue=true
</pre></div>
</div>
<p>改めて、キューの確認を行うと作成したキューが確認できる</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs list-queues
{
    &quot;QueueUrls&quot;: [
        &quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot;
    ]
}
</pre></div>
</div>
<p>また、作成したキューについての詳細を<code class="docutils literal notranslate"><span class="pre">get-queue-attributes</span></code>で表示させることができる</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs get-queue-attributes --attribute-names All --queue-url https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME] 

{
    &quot;Attributes&quot;: {
        &quot;QueueArn&quot;: &quot;arn:aws:sqs:ap-northeast-1:[AWS_ACCOUNT_ID]:[YOUR_QUEUE_NAME]&quot;,
        &quot;ApproximateNumberOfMessages&quot;: &quot;0&quot;,
        &quot;ApproximateNumberOfMessagesNotVisible&quot;: &quot;0&quot;,
        &quot;ApproximateNumberOfMessagesDelayed&quot;: &quot;0&quot;,
        &quot;CreatedTimestamp&quot;: &quot;1683331260&quot;,
        &quot;LastModifiedTimestamp&quot;: &quot;1683331260&quot;,
        &quot;VisibilityTimeout&quot;: &quot;30&quot;,
        &quot;MaximumMessageSize&quot;: &quot;262144&quot;,
        &quot;MessageRetentionPeriod&quot;: &quot;345600&quot;,
        &quot;DelaySeconds&quot;: &quot;0&quot;,
        &quot;ReceiveMessageWaitTimeSeconds&quot;: &quot;0&quot;,
        &quot;SqsManagedSseEnabled&quot;: &quot;true&quot;
    }
}
</pre></div>
</div>
<p>得られる属性値のうち、キューの状態を表すものは以下</p>
<ul class="simple">
<li><p>ApproximateNumberOfMessages<br />未処理のメッセージの数</p></li>
<li><p>ApproximateNumberOfMessagesNotVisible<br />Consumerが取得したが、処理完了していないメッセージ数（処理中のメッセージ数）</p></li>
<li><p>ApproximateNumberOfMessagesDelayed<br />遅延時間が設定されているメッセージ数（Consumer処理可能になるまで待機しているメッセージ数）</p></li>
</ul>
<p>得られる属性値のうち、キューの設定値を表すものは以下</p>
<ul class="simple">
<li><p>VisibilityTimeout<br />可視性タイムアウト（他のConsumerにメッセージが見えるようになるまでの時間）</p></li>
<li><p>DelaySeconds<br />遅延時間（受信してから、Consumerがメッセージが見えるようになるまでの時間）</p></li>
<li><p>ReceiveMessageWaitTimeSeconds<br />メッセージがポーリングされる際の最大待機時間</p></li>
<li><p>MessageRetentionPeriod<br />メッセージが保管される期間</p></li>
</ul>
<p>コンソールから確認すると以下</p>
<p><img alt="../_images/sqs_setting.png" src="../_images/sqs_setting.png" /></p>
</section>
<section id="gui">
<h3><span class="section-number">2.1.2. </span>GUIで作成する場合<a class="headerlink" href="#gui" title="この見出しへのパーマリンク">¶</a></h3>
<p>キュータイプと名前を指定する</p>
<p><img alt="../_images/sqs_setting_manual1.png" src="../_images/sqs_setting_manual1.png" /></p>
<p>キューに対する遅延時間や可視性タイムアウトを設定する</p>
<p><img alt="../_images/sqs_setting_manual2.png" src="../_images/sqs_setting_manual2.png" /></p>
<p>暗号化とアクセスポリシーを設定する</p>
<p><img alt="../_images/sqs_setting_manual3.png" src="../_images/sqs_setting_manual3.png" /></p>
</section>
</section>
<section id="dlt">
<h2><span class="section-number">2.2. </span>DLTの設定方法<a class="headerlink" href="#dlt" title="この見出しへのパーマリンク">¶</a></h2>
<p>CLIから作成する場合は、<code class="docutils literal notranslate"><span class="pre">RedrivePolicy</span></code>をオプションとして指定することで作成することができるが、詳細は<a class="reference external" href="https://docs.aws.amazon.com/cli/latest/reference/sqs/create-queue.html">公式ドキュメント</a>を参照されたい。</p>
<p>コンソール画面からは、キューを作成や更新する際に指定することができる。注意点として、DLQは送信元のキューと同じキュータイプ（標準・FIFO）を設定する必要がある。</p>
<p><img alt="../_images/sqs_dlq_setting.png" src="../_images/sqs_dlq_setting.png" /></p>
<p>最大受信数に設定した回数、、キューが失敗した場合にDLQに送信される。</p>
</section>
<section id="id2">
<h2><span class="section-number">2.3. </span>メッセージの送受信方法<a class="headerlink" href="#id2" title="この見出しへのパーマリンク">¶</a></h2>
<section id="id3">
<h3><span class="section-number">2.3.1. </span>CLIで送信<a class="headerlink" href="#id3" title="この見出しへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">send-message</span></code>を利用してメッセージを送信するとメッセージIDとメッセージのハッシュが返却される</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aws</span> <span class="n">sqs</span> <span class="n">send</span><span class="o">-</span><span class="n">message</span> <span class="o">--</span><span class="n">queue</span><span class="o">-</span><span class="n">url</span> <span class="s2">&quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot;</span> <span class="o">--</span><span class="n">message</span><span class="o">-</span><span class="n">body</span> <span class="s2">&quot;hello world&quot;</span>
<span class="p">{</span>
    <span class="s2">&quot;MD5OfMessageBody&quot;</span><span class="p">:</span> <span class="s2">&quot;5eb63bbbe01eeed093cb22bb8f5acdc3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MessageId&quot;</span><span class="p">:</span> <span class="s2">&quot;1db7869e-5ca0-4e97-810c-bb7b7b7522bc&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3><span class="section-number">2.3.2. </span>コンソールから送信<a class="headerlink" href="#id4" title="この見出しへのパーマリンク">¶</a></h3>
<p>SQSのコンソールから、キューを選択しメッセージを送受信を選択</p>
<p><img alt="../_images/sqs_txrx_console.png" src="../_images/sqs_txrx_console.png" /></p>
<p>メッセージを送信タブから、メッセージ本文を記載して送信する</p>
<p><img alt="../_images/sqs_tx_console.png" src="../_images/sqs_tx_console.png" /></p>
</section>
<section id="id5">
<h3><span class="section-number">2.3.3. </span>送信の確認<a class="headerlink" href="#id5" title="この見出しへのパーマリンク">¶</a></h3>
<p>CLIから<code class="docutils literal notranslate"><span class="pre">ApproximateNumberOfMessages</span></code>を確認する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs get-queue-attributes --attribute-names ApproximateNumberOfMessages  --queue-url &quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot; 
{
    &quot;Attributes&quot;: {
        &quot;ApproximateNumberOfMessages&quot;: &quot;2&quot;
    }
}
</pre></div>
</div>
<p>もしくは、コンソールから<code class="docutils literal notranslate"><span class="pre">利用可能なメッセージ</span></code>を確認する</p>
<p><img alt="../_images/sqs_message_num.png" src="../_images/sqs_message_num.png" /></p>
</section>
<section id="id6">
<h3><span class="section-number">2.3.4. </span>コンソールで受信確認<a class="headerlink" href="#id6" title="この見出しへのパーマリンク">¶</a></h3>
<p>まず、コンソールからキュー内のメッセージを受信することができる。
注意点は、SQSはメッセージを受信しただけではなく、削除までする必要があるので、このオペレーションを繰り返すと、受信回数が増えてDLQに移動してしまうこと。</p>
<p>SQSのコンソールから、キューを選択しメッセージを送受信を選択</p>
<p><img alt="../_images/sqs_txrx_console.png" src="../_images/sqs_txrx_console.png" /></p>
<p>メッセージを受信タブから、メッセージをポーリングする</p>
<p><img alt="../_images/sqs_rx_console1.png" src="../_images/sqs_rx_console1.png" /></p>
<p>ポーリングの結果得られたメッセージを押下すると、本文などが確認できる。</p>
<p><img alt="../_images/sqs_rx_console2.png" src="../_images/sqs_rx_console2.png" /></p>
<p>ポーリングをDLQで設定した回数分行うとDLQに移動する</p>
</section>
<section id="id7">
<h3><span class="section-number">2.3.5. </span>CLIでメッセージ受信と削除<a class="headerlink" href="#id7" title="この見出しへのパーマリンク">¶</a></h3>
<p>次に、メッセージをコンソールから受信し、その上で削除を行う。</p>
<p>メッセージの受信は<code class="docutils literal notranslate"><span class="pre">receive-message</span></code>を利用する。メッセージは複数格納されていても、1つのメッセージだけが受信される</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs receive-message --queue-url &quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot; 
{
    &quot;Messages&quot;: [
        {
            &quot;MessageId&quot;: &quot;698a7959-7d80-4125-9ccf-2a1a52334606&quot;,
            &quot;ReceiptHandle&quot;: &quot;AQEBQfRoUCKb74uFFlmZT~~~~&quot;,
            &quot;MD5OfBody&quot;: &quot;11b1d675d840f10f85fed95d4af7264a&quot;,
            &quot;Body&quot;: &quot;message_from_console1&quot;
        }
    ]
}
</pre></div>
</div>
<p>SQSではメッセージの処理が完了したら、明示的にメッセージの削除を行う必要がある。
メッセージの削除は<code class="docutils literal notranslate"><span class="pre">delete-message</span></code>を利用する。また、メッセージを指定するために受信した際に受け取った`ReceiptHandle&quot;を指定して削除するメッセージを決める</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ aws sqs delete-message --queue-url &quot;https://sqs.ap-northeast-1.amazonaws.com/[AWS_ACCOUNT_ID]/[YOUR_QUEUE_NAME]&quot; --receipt-handle &quot;AQEBQfRoUCKb74uFFlmZT~~~~&quot;
</pre></div>
</div>
<p>削除されたことで、メッセージキューにも、DLQにもメッセージが存在しないことが確認できる。</p>
</section>
</section>
</section>
<section id="sqs-java">
<h1><span class="section-number">3. </span>SQSのチュートリアル実装(Java編)<a class="headerlink" href="#sqs-java" title="この見出しへのパーマリンク">¶</a></h1>
<p>参考サイト</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.stsd.co.jp/dev-blog/send_and_receive_amazon_sqs_messages_from_java.html">JavaからAmazon SQSのメッセージ送受信を行う</a></p></li>
<li><p><a class="reference external" href="https://weblabo.oscasierra.net/aws-sqs-tutorial-java-1/">JavaでAmazon SQSのメッセージを送受信するチュートリアル</a></p></li>
</ul>
<section id="sqs">
<h2><span class="section-number">3.1. </span>SQSの作成<a class="headerlink" href="#sqs" title="この見出しへのパーマリンク">¶</a></h2>
<p>SQSは別資料で作成した標準キューを再利用する</p>
</section>
<section id="ec2">
<h2><span class="section-number">3.2. </span>EC2の作成<a class="headerlink" href="#ec2" title="この見出しへのパーマリンク">¶</a></h2>
<p>基本的にはデフォルトでEC2を作成。</p>
<p>IAMについては以下のポリシーを持つIAMポリシーを作成しておき付与する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;VisualEditor0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;sqs:DeleteMessage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:ReceiveMessage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:SendMessage&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:sqs:ap-northeast-1:[アカウントID]:[SQS_NAME]&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="java-producer">
<h2><span class="section-number">3.3. </span>Javaのプログラム作成（Producer<a class="headerlink" href="#java-producer" title="この見出しへのパーマリンク">¶</a></h2>
<p>JavaからSQSへのアクセスには、AWS公式のライブラリ<code class="docutils literal notranslate"><span class="pre">aws-java-sdk-sqs</span></code>を利用することとする。pomに以下を追加する。</p>
<p>pom.xml</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="n">amazonaws</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">aws</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="n">sqs</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">1.12.116</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</pre></div>
</div>
<section id="config">
<h3><span class="section-number">3.3.1. </span>config<a class="headerlink" href="#config" title="この見出しへのパーマリンク">¶</a></h3>
<p>src/main/javaの配下にconfigのディレクトリを作成して、<code class="docutils literal notranslate"><span class="pre">sqsConfig</span></code>を作成する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_producer</span><span class="o">.</span><span class="n">config</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQS</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQSClientBuilder</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">sqsConfig</span> <span class="p">{</span>
    <span class="nd">@Bean</span>
    <span class="n">public</span> <span class="n">AmazonSQS</span> <span class="n">amazonSQSClient</span><span class="p">(){</span>
        <span class="k">return</span> <span class="n">AmazonSQSClientBuilder</span><span class="o">.</span><span class="n">defaultClient</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>&#64;configurationにより、設定クラスであることを宣言</p>
<ul>
<li><p>設定クラスではSpringがDIするためのBeanの定義を行う</p></li>
</ul>
</li>
<li><p>&#64;Beanにより、メソッドがDIコンテナによって管理させるBeanを作成することを宣言</p>
<ul>
<li><p>AmazonSQSClient()メソッドにより、SQSのクライアントを生成する</p></li>
<li><p>defaultClient() メソッドは、既定の設定を使用して AmazonSQS クライアントのインスタンスを作成します。</p></li>
</ul>
</li>
</ul>
</section>
<section id="messagesender">
<h3><span class="section-number">3.3.2. </span>MessageSender<a class="headerlink" href="#messagesender" title="この見出しへのパーマリンク">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_producer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQS</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.model.SendMessageRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">MessageSender</span> <span class="p">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">private</span> <span class="n">AmazonSQS</span> <span class="n">amazonSQSClient</span><span class="p">;</span>

    <span class="n">public</span> <span class="n">void</span> <span class="n">sendMessage</span><span class="p">(){</span>
        <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://sqs.ap-northeast-1.amazonaws.com/626394096352/MA-fujishiroms-sqs-standard&quot;</span><span class="p">;</span>

        <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;hello SQS!! FROM JAVA&quot;</span><span class="p">;</span>

        <span class="n">SendMessageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SendMessageRequest</span><span class="p">()</span>
                <span class="o">.</span><span class="n">withQueueUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="o">.</span><span class="n">withMessageBody</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="o">.</span><span class="n">withDelaySeconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
        <span class="n">amazonSQSClient</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="main">
<h3><span class="section-number">3.3.3. </span>main<a class="headerlink" href="#main" title="この見出しへのパーマリンク">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_producer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="p">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">SqsProducerApplication</span> <span class="p">{</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">SpringApplication</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">SqsProducerApplication</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
        <span class="n">MessageSender</span> <span class="n">sender</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">getBean</span><span class="p">(</span><span class="n">MessageSender</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
        <span class="n">sender</span><span class="o">.</span><span class="n">sendMessage</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="java-consumer">
<h2><span class="section-number">3.4. </span>Javaのプログラム作成（Consumer<a class="headerlink" href="#java-consumer" title="この見出しへのパーマリンク">¶</a></h2>
<section id="id8">
<h3><span class="section-number">3.4.1. </span>Config<a class="headerlink" href="#id8" title="この見出しへのパーマリンク">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_consumer</span><span class="o">.</span><span class="n">config</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQS</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQSClientBuilder</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">sqsConfig</span> <span class="p">{</span>
    <span class="nd">@Bean</span>
    <span class="n">public</span> <span class="n">AmazonSQS</span> <span class="n">amazonSQSClient</span><span class="p">(){</span>
        <span class="k">return</span> <span class="n">AmazonSQSClientBuilder</span><span class="o">.</span><span class="n">defaultClient</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="messagereceiver">
<h3><span class="section-number">3.4.2. </span>MessageReceiver<a class="headerlink" href="#messagereceiver" title="この見出しへのパーマリンク">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_consumer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.AmazonSQS</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.model.Message</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.model.ReceiveMessageRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.amazonaws.services.sqs.model.ReceiveMessageResult</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="p">;</span>

<span class="nd">@Component</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">MessageReceiver</span> <span class="p">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">private</span> <span class="n">AmazonSQS</span> <span class="n">amazonSQSClient</span><span class="p">;</span>


    <span class="n">public</span> <span class="n">void</span> <span class="n">receiveMessage</span><span class="p">(){</span>
    <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://sqs.ap-northeast-1.amazonaws.com/626394096352/MA-fujishiroms-sqs-standard&quot;</span><span class="p">;</span>

    <span class="n">ReceiveMessageRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ReceiveMessageRequest</span><span class="p">()</span>
                <span class="o">.</span><span class="n">withQueueUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="o">.</span><span class="n">withWaitTimeSeconds</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
                <span class="o">.</span><span class="n">withMaxNumberOfMessages</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

    <span class="n">ReceiveMessageResult</span> <span class="n">result</span> <span class="o">=</span> <span class="n">amazonSQSClient</span><span class="o">.</span><span class="n">receiveMessage</span><span class="p">(</span><span class="n">request</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">Message</span> <span class="n">msg</span> <span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">getMessages</span><span class="p">())</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">受信したメッセージの情報を表示</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="o">+</span><span class="n">msg</span><span class="o">.</span><span class="n">getMessageId</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="p">);</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;  Message ID     : &quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">getMessageId</span><span class="p">());</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;  Receipt Handle : &quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">getReceiptHandle</span><span class="p">());</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;  Message Body   : &quot;</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">getBody</span><span class="p">());</span>
        <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">();</span>

        <span class="o">//</span> <span class="n">受信したメッセージを削除</span>
        <span class="n">amazonSQSClient</span><span class="o">.</span><span class="n">deleteMessage</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">getReceiptHandle</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id9">
<h3><span class="section-number">3.4.3. </span>main<a class="headerlink" href="#id9" title="この見出しへのパーマリンク">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">com</span><span class="o">.</span><span class="n">msa</span><span class="o">.</span><span class="n">aws</span><span class="o">.</span><span class="n">sqs</span><span class="o">.</span><span class="n">sqs_consumer</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationContext</span><span class="p">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">SqsConsumerApplication</span> <span class="p">{</span>

	<span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">SpringApplication</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">SqsConsumerApplication</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
		<span class="n">MessageReceiver</span> <span class="n">receiver</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">getBean</span><span class="p">(</span><span class="n">MessageReceiver</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
		<span class="n">receiver</span><span class="o">.</span><span class="n">receiveMessage</span><span class="p">();</span>

	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id10">
<h2><span class="section-number">3.5. </span>EC2からの実行<a class="headerlink" href="#id10" title="この見出しへのパーマリンク">¶</a></h2>
<section id="jar">
<h3><span class="section-number">3.5.1. </span>jarファイルを移動させる<a class="headerlink" href="#jar" title="この見出しへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p>キーペアのコピー</p>
<ul>
<li><p>作成した、キーペアをworkspacesにコピーしておく（ファイルのコピーはできないので、テキストベースでコピーする。</p></li>
</ul>
</li>
<li><p>権限付与</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chmod</span> <span class="mi">600</span> <span class="n">XXXX</span><span class="o">.</span><span class="n">pem</span> 
</pre></div>
</div>
<ul class="simple">
<li><p>ファイルコピーコマンド実行</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;EC2秘密鍵&#39;</span> <span class="s1">&#39;ローカルの転送したいファイル&#39;</span> <span class="s1">&#39;EC2ユーザー名@IPアドレス:ファイル配置先 </span>

<span class="n">EX</span><span class="p">)</span><span class="n">scp</span> <span class="o">-</span><span class="n">i</span> <span class="o">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">XXX</span><span class="o">.</span><span class="n">pem</span> <span class="n">TEST</span><span class="o">.</span><span class="n">txt</span> <span class="n">ec2</span><span class="o">-</span><span class="n">user</span><span class="o">@</span><span class="mf">12.34.567.890</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span>
</pre></div>
</div>
</section>
<section id="java">
<h3><span class="section-number">3.5.2. </span>javaのインストール<a class="headerlink" href="#java" title="この見出しへのパーマリンク">¶</a></h3>
<p>EC2にjavaをインストールして、jarファイルを実行する</p>
<p>javaのインストール</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">java</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="n">amazon</span><span class="o">-</span><span class="n">corretto</span>
</pre></div>
</div>
<p>実行</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">XXX</span><span class="o">.</span><span class="n">jar</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3><span class="section-number">3.5.3. </span>結果<a class="headerlink" href="#id11" title="この見出しへのパーマリンク">¶</a></h3>
<p>Producer側のjarファイルを実行</p>
<p><img alt="../_images/sqs_tutorial_producer.png" src="../_images/sqs_tutorial_producer.png" /></p>
<p>Consumer側のjarファイルを実行すると、メッセージを取得することができる</p>
<p><img alt="../_images/sqs_tutorial_consumer.png" src="../_images/sqs_tutorial_consumer.png" /></p>
<p>CloudWatchでApproximateNumberOfMessagesVisibleを確認するとConsumer側ではメッセージを削除するので、Produceした分増えた後、Consumeした分減る</p>
<p><img alt="../_images/sqs_tutorial_metrix.png" src="../_images/sqs_tutorial_metrix.png" /></p>
</section>
</section>
</section>
<section id="id12">
<h1><span class="section-number">4. </span>SQSの開発環境構築<a class="headerlink" href="#id12" title="この見出しへのパーマリンク">¶</a></h1>
<section id="producercicd">
<h2><span class="section-number">4.1. </span>ProducerのCICD<a class="headerlink" href="#producercicd" title="この見出しへのパーマリンク">¶</a></h2>
<p>Producer側はバッチで処理を流すので、CodeDeployでEC2上にjarファイルをデプロイする</p>
<ol class="simple">
<li><p>IntelliJとGithubを連携</p></li>
<li><p>GithubとCodeCommitのミラーリング</p></li>
<li><p>CodeDeoloyの準備</p></li>
<li><p>CodeDeployの設定</p></li>
<li><p>CodePipelineの作成</p></li>
</ol>
<section id="codedeploy">
<h3><span class="section-number">4.1.1. </span>CodeDeployの準備<a class="headerlink" href="#codedeploy" title="この見出しへのパーマリンク">¶</a></h3>
<p>appspec.ymlをJava PJのルートディレクトリに配置する</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="p">:</span> <span class="mf">0.0</span>
<span class="n">os</span><span class="p">:</span> <span class="n">linux</span>
<span class="n">files</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">source</span><span class="p">:</span> <span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">sqs_producer</span><span class="o">-</span><span class="mf">0.0.1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">.</span><span class="n">jar</span>
    <span class="n">destination</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ec2</span><span class="o">-</span><span class="n">users</span>
</pre></div>
</div>
<p>EC2上で以下を実行</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="o">-</span><span class="n">y</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">ruby</span>
<span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">aws</span><span class="o">-</span><span class="n">cli</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">aws</span><span class="o">-</span><span class="n">codedeploy</span><span class="o">-</span><span class="n">ap</span><span class="o">-</span><span class="n">northeast</span><span class="o">-</span><span class="mf">1.</span><span class="n">s3</span><span class="o">.</span><span class="n">ap</span><span class="o">-</span><span class="n">northeast</span><span class="o">-</span><span class="mf">1.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">latest</span><span class="o">/</span><span class="n">install</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">./</span><span class="n">install</span>
<span class="n">sudo</span> <span class="o">./</span><span class="n">install</span> <span class="n">auto</span>
</pre></div>
</div>
<p>また、EC2に付与されているIAMRoleに<code class="docutils literal notranslate"><span class="pre">AmazonEC2RoleforAWSCodeDeploy</span></code>のポリシーを追加</p>
<p>CodeDeployに利用するためのIAM Roleを作成する</p>
<p><img alt="../_images/coddedeploy_role.jpeg" src="../_images/coddedeploy_role.jpeg" /></p>
</section>
<section id="id13">
<h3><span class="section-number">4.1.2. </span><a class="headerlink" href="#id13" title="この見出しへのパーマリンク">¶</a></h3>
</section>
</section>
<section id="consumercicd">
<h2><span class="section-number">4.2. </span>ConsumerのCICD<a class="headerlink" href="#consumercicd" title="この見出しへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>IntelliJとgithub連携</p></li>
<li><p>ECSの設定</p></li>
<li><p>DockerFileの作成</p></li>
<li><p>Pipelineの作成</p></li>
<li><p>buildspec.ymlの作成</p></li>
</ul>
</section>
</section>
<section id="id14">
<h1><span class="section-number">5. </span>SQSの本格実装(Java編)<a class="headerlink" href="#id14" title="この見出しへのパーマリンク">¶</a></h1>
<section id="producer">
<h2><span class="section-number">5.1. </span>Producerの改善<a class="headerlink" href="#producer" title="この見出しへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>ハードコーディングした、数字分メッセージを発出する</p></li>
<li><p>引数で数字を受け取って、数字分メッセージを発出する</p></li>
</ul>
</section>
<section id="consumer">
<h2><span class="section-number">5.2. </span>Consumerの改善<a class="headerlink" href="#consumer" title="この見出しへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>常時起動するようにする</p></li>
<li><p>受け取った数字分待機するようにする</p></li>
<li><p>メトリクスの挙動を確認する</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">2. SQSのチュートリアル実装(CLI編)</a><ul>
<li><a class="reference internal" href="#id1">2.1. キューの作り方</a><ul>
<li><a class="reference internal" href="#cli">2.1.1. CLIで作成する場合</a></li>
<li><a class="reference internal" href="#gui">2.1.2. GUIで作成する場合</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dlt">2.2. DLTの設定方法</a></li>
<li><a class="reference internal" href="#id2">2.3. メッセージの送受信方法</a><ul>
<li><a class="reference internal" href="#id3">2.3.1. CLIで送信</a></li>
<li><a class="reference internal" href="#id4">2.3.2. コンソールから送信</a></li>
<li><a class="reference internal" href="#id5">2.3.3. 送信の確認</a></li>
<li><a class="reference internal" href="#id6">2.3.4. コンソールで受信確認</a></li>
<li><a class="reference internal" href="#id7">2.3.5. CLIでメッセージ受信と削除</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sqs-java">3. SQSのチュートリアル実装(Java編)</a><ul>
<li><a class="reference internal" href="#sqs">3.1. SQSの作成</a></li>
<li><a class="reference internal" href="#ec2">3.2. EC2の作成</a></li>
<li><a class="reference internal" href="#java-producer">3.3. Javaのプログラム作成（Producer</a><ul>
<li><a class="reference internal" href="#config">3.3.1. config</a></li>
<li><a class="reference internal" href="#messagesender">3.3.2. MessageSender</a></li>
<li><a class="reference internal" href="#main">3.3.3. main</a></li>
</ul>
</li>
<li><a class="reference internal" href="#java-consumer">3.4. Javaのプログラム作成（Consumer</a><ul>
<li><a class="reference internal" href="#id8">3.4.1. Config</a></li>
<li><a class="reference internal" href="#messagereceiver">3.4.2. MessageReceiver</a></li>
<li><a class="reference internal" href="#id9">3.4.3. main</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">3.5. EC2からの実行</a><ul>
<li><a class="reference internal" href="#jar">3.5.1. jarファイルを移動させる</a></li>
<li><a class="reference internal" href="#java">3.5.2. javaのインストール</a></li>
<li><a class="reference internal" href="#id11">3.5.3. 結果</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id12">4. SQSの開発環境構築</a><ul>
<li><a class="reference internal" href="#producercicd">4.1. ProducerのCICD</a><ul>
<li><a class="reference internal" href="#codedeploy">4.1.1. CodeDeployの準備</a></li>
<li><a class="reference internal" href="#id13">4.1.2. </a></li>
</ul>
</li>
<li><a class="reference internal" href="#consumercicd">4.2. ConsumerのCICD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">5. SQSの本格実装(Java編)</a><ul>
<li><a class="reference internal" href="#producer">5.1. Producerの改善</a></li>
<li><a class="reference internal" href="#consumer">5.2. Consumerの改善</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="cloudformaiton_CICD.html"
                          title="前の章へ"><span class="section-number">1. </span>CodePipelineを利用してCFNのCICD環境を作成する</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="MSK.html"
                          title="次の章へ"><span class="section-number">6. </span>MSKのチュートリアル実装(CLI編)</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/HandsOn/SQS.md.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="MSK.html" title="6. MSKのチュートリアル実装(CLI編)"
             >次へ</a> |</li>
        <li class="right" >
          <a href="cloudformaiton_CICD.html" title="1. CodePipelineを利用してCFNのCICD環境を作成する"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">my_sphinx  ドキュメント</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>SQSのチュートリアル実装(CLI編)</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, sphinx_user.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.2.3.
    </div>
  </body>
</html>